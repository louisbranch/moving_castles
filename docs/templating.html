        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>templating Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="favicon.ico">
        
        </head>
        <body data-library="templating">
        <div class="page">
        <div class="header">
          <a href="index.html"><div class="logo"></div></a>
          <a href="index.html">Dart Documentation</a>
         &rsaquo; <a href="templating.html">templating</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
<h2><strong>templating</strong> library</h2>
<div class="doc"><p>Common utility functions used by code generated by the dwc compiler. </p></div>
<div>
<h3>Functions</h3>
<div class="method"><h4 id="sanitizeUri">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_core/String.html">String</a> <strong>sanitizeUri</strong>(uri) <a class="anchor-link" href="#sanitizeUri"
              title="Permalink to sanitizeUri">#</a></h4>
<div class="doc">
<p>Ensure that <code>usiString</code> is a safe URI. Otherwise, return a '#' URL.</p>
<p>The logic in this method was based on the GWT implementation located at:
http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/safehtml/shared/UriUtils.java</p>
<pre class="source">
String sanitizeUri(uri) {
 if (uri is SafeUri) return uri.toString();
 uri = uri.toString();
 return _isSafeUri(uri) ? uri : '#';
}
</pre>
</div>
</div>
<div class="method"><h4 id="updateStyle">
<button class="show-code">Code</button>
void <strong>updateStyle</strong>(<a href="http://api.dartlang.org/dart_html/Element.html">Element</a> elem, oldValue, newValue) <a class="anchor-link" href="#updateStyle"
              title="Permalink to updateStyle">#</a></h4>
<div class="doc">
<p>Changes the style properties from 
<span class="param">oldValue</span> to 
<span class="param">newValue</span>. A runtime error
is reported if 
<span class="param">newValue</span> is not a <code>Map&lt;String, String&gt;</code>.</p>
<pre class="source">
void updateStyle(Element elem, oldValue, newValue) {
 if (oldValue is Map&lt;String, String&gt;) {
   var props = newValue is Map&lt;String, String&gt; ? newValue : const {};
   for (var property in oldValue.keys) {
     if (!props.containsKey(property)) {
       // Value will not be overwritten with new setting. Remove.
       elem.style.removeProperty(property);
     }
   }
 }
 if (newValue is! Map&lt;String, String&gt;) {
   throw new DataBindingError("Expected Map&lt;String, String&gt; value "
     "to data-style binding.");
 }
 newValue.forEach(elem.style.setProperty);
}
</pre>
</div>
</div>
<div class="method"><h4 id="bindStyle">
<button class="show-code">Code</button>
<a href="web_ui.observe.observable/ChangeUnobserver.html">ChangeUnobserver</a> <strong>bindStyle</strong>(<a href="http://api.dartlang.org/dart_html/Element.html">Element</a> elem, <a href="http://api.dartlang.org/dart_core/Map.html">Map</a>&lt;<a href="http://api.dartlang.org/dart_core/String.html">String</a>, <a href="http://api.dartlang.org/dart_core/String.html">String</a>&gt; exp()) <a class="anchor-link" href="#bindStyle"
              title="Permalink to bindStyle">#</a></h4>
<div class="doc">
<p>Bind the result of 
<span class="param">exp</span> to the style attribute in 
<span class="param">elem</span>. </p>
<pre class="source">
ChangeUnobserver bindStyle(Element elem, Map&lt;String, String&gt; exp()) {
 return watchAndInvoke(exp, (e) =&gt; updateStyle(elem, e.oldValue, e.newValue),
     'css-style-bind');
}
</pre>
</div>
</div>
<div class="method"><h4 id="bindCssClasses">
<button class="show-code">Code</button>
<a href="web_ui.observe.observable/ChangeUnobserver.html">ChangeUnobserver</a> <strong>bindCssClasses</strong>(<a href="http://api.dartlang.org/dart_html/Element.html">Element</a> elem, exp()) <a class="anchor-link" href="#bindCssClasses"
              title="Permalink to bindCssClasses">#</a></h4>
<div class="doc">
<p>Bind the result of 
<span class="param">exp</span> to the class attribute in 
<span class="param">elem</span>. 
<span class="param">exp</span> is a closure
that can return a string, a list of strings, an string with spaces, or null.</p>
<p>You can bind a single class attribute by binding a getter to the property
defining your class.  For example,</p>
<pre><code>var class1 = 'pretty';
bindCssClasses(e, () =&gt; class1);
</code></pre>
<p>In this example, if you update class1 to null or an empty string, the
previous value ('pretty') is removed from the element.</p>
<p>You can bind multiple class attributes in several ways: by returning a list
of values in 
<span class="param">exp</span>, by returning in 
<span class="param">exp</span> a string with multiple classes
separated by spaces, or by calling this function several times. For example,
suppose you want to bind 2 classes on an element,</p>
<pre><code>var class1 = 'pretty';
var class2 = 'selected';
</code></pre>
<p>and you want to independently change class1 and class2. For instance, If you
set <code>class1</code> to null, you'd like <code>pretty</code> will be removed from <code>e.classes</code>,
but <code>selected</code> to be kept.  The tree alternatives mentioned earlier look as
follows:</p><ul><li>
<p>binding classes with a list:</p>
<pre><code>bindCssClasses(e, () =&gt; [class1, class2]);
</code></pre></li><li>
<p>binding classes with a string:</p>
<pre><code>bindCssClasses(e, () =&gt; "${class1 != null ? class1 : ''} "
                        "${class2 != null ? class2 : ''}");
</code></pre></li><li>
<p>binding classes separately:</p>
<pre><code>bindCssClasses(e, () =&gt; class1);
bindCssClasses(e, () =&gt; class2);
</code></pre></li></ul>
<pre class="source">
ChangeUnobserver bindCssClasses(Element elem, dynamic exp()) {
 return watchAndInvoke(exp, (e) {
   if (e.changes != null) {
     for (var change in e.changes) changeCssClasses(elem, change);
   } else {
     updateCssClass(elem, false, e.oldValue);
     updateCssClass(elem, true, e.newValue);
   }
 }, 'css-class-bind');
}
</pre>
</div>
</div>
<div class="method"><h4 id="changeCssClasses">
<button class="show-code">Code</button>
void <strong>changeCssClasses</strong>(elem, <a href="web_ui.observe.observable/ChangeRecord.html">ChangeRecord</a> change) <a class="anchor-link" href="#changeCssClasses"
              title="Permalink to changeCssClasses">#</a></h4>
<div class="doc">
<p>Updates the CSS classes based on the <code>changes</code> that were made to an
<code>ObservableList</code>.</p>
<pre class="source">
void changeCssClasses(elem, ChangeRecord change) {
 if (change.oldValue != null) elem.classes.remove(change.oldValue);
 if (change.newValue != null) elem.classes.add(change.newValue);
}
</pre>
</div>
</div>
<div class="method"><h4 id="updateCssClass">
<button class="show-code">Code</button>
void <strong>updateCssClass</strong>(<a href="http://api.dartlang.org/dart_html/Element.html">Element</a> elem, <a href="http://api.dartlang.org/dart_core/bool.html">bool</a> addClasses, classes) <a class="anchor-link" href="#updateCssClass"
              title="Permalink to updateCssClass">#</a></h4>
<div class="doc">
<p>Adds CSS 
<span class="param">classes</span> if 
<span class="param">addClasses</span> is true, otherwise removes them.
This is useful to keep one or more CSS classes in sync with a boolean
property.</p>
<p>The classes parameter can be either a <code>String</code> or [List<String>].
If it is a single string, it may contain spaces and several class names.
If it is a list of strings, null and empty strings are ignored.
Any other type except null will throw an <code>ArgumentError</code>.</p>
<p>For example:</p>
<pre><code>updateCssClass(node, item.isDone, 'item-checked item-completed');
</code></pre>
<p>It can also be used with a watcher:</p>
<pre><code>watch(() =&gt; item.isDone, (e) {
  updateCssClass(node, e.newValue, 'item-checked item-completed');
});
</code></pre>
<p>If the set of classes is changing dynamically, it is better to use
<a class="crossref" href="templating.html#bindCssClasses">bindCssClasses</a>.</p>
<pre class="source">
void updateCssClass(Element elem, bool addClasses, classes) {
 if (classes == '' || classes == null) return;
 if (addClasses) {
   // Add classess
   if (classes is String) {
     if (classes.contains(' ')) {
       elem.classes.addAll(classes.split(' '));
     } else {
       elem.classes.add(classes);
     }
   } else if (classes is List&lt;String&gt;) {
     elem.classes.addAll(classes.where((e) =&gt; e != null &amp;&amp; e != ''));
   } else {
     throw new ArgumentError('classes must be a String or List&lt;String&gt;.');
   }
 } else {
   // Remove classes
   if (classes is String) {
     if (classes.contains(' ')) {
       elem.classes.removeAll(classes.split(' '));
     } else {
       elem.classes.remove(classes);
     }
   } else if (classes is List&lt;String&gt;) {
     elem.classes.removeAll(classes.where((e) =&gt; e != null &amp;&amp; e != ''));
   } else {
     throw new ArgumentError('classes must be a String or List&lt;String&gt;.');
   }
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="updateBinding">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_html/Node.html">Node</a> <strong>updateBinding</strong>(value, <a href="http://api.dartlang.org/dart_html/Node.html">Node</a> node, [<a href="http://api.dartlang.org/dart_core/String.html">String</a> stringValue]) <a class="anchor-link" href="#updateBinding"
              title="Permalink to updateBinding">#</a></h4>
<div class="doc">
<p>Updates a data-bound 
<span class="param">node</span> to a new 
<span class="param">value</span>. If the new value is not
<code>SafeHtml</code> and the node is a <code>Text</code> node, then we update the node in place.
Otherwise, the node is replaced in the DOM tree and the new node is returned.

<span class="param">stringValue</span> should be equivalent to <code>value.toString()</code> and can be passed
here if it has already been computed.</p>
<pre class="source">
Node updateBinding(value, Node node, [String stringValue]) {
 var isSafeHtml = value is SafeHtml;
 if (stringValue == null) {
   stringValue = value.toString();
 }

 if (!isSafeHtml &amp;&amp; node is Text) {
   node.text = stringValue;
 } else {
   var old = node;
   node = isSafeHtml ? new Element.html(stringValue) : new Text(stringValue);
   old.replaceWith(node);
 }
 return node;
}
</pre>
</div>
</div>
<div class="method"><h4 id="nodeForBinding">
<button class="show-code">Code</button>
<a href="http://api.dartlang.org/dart_html/Node.html">Node</a> <strong>nodeForBinding</strong>(binding) <a class="anchor-link" href="#nodeForBinding"
              title="Permalink to nodeForBinding">#</a></h4>
<div class="doc">
<p>Take the value of a bound expression and creates an HTML node with its value.
Normally bindings are associated with text nodes, unless 
<span class="param">binding</span> has the
<code>SafeHtml</code> type, in which case an html element is created for it.</p>
<pre class="source">
Node nodeForBinding(binding) =&gt; binding is SafeHtml
   ? new Element.html(binding.toString()) : new Text(binding.toString());
</pre>
</div>
</div>
</div>
<div>
<h3>Abstract Classes</h3>
          <div class="type">
          <h4>
            <a href="templating/PlaceholderTemplate.html"><strong>PlaceholderTemplate</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/TemplateItem.html"><strong>TemplateItem</strong></a>
          </h4>
          </div>
          
</div>
<div>
<h3>Classes</h3>
          <div class="type">
          <h4>
            <a href="templating/Binding.html"><strong>Binding</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/ClassAttrBinding.html"><strong>ClassAttrBinding</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/ComponentItem.html"><strong>ComponentItem</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/ConditionalTemplate.html"><strong>ConditionalTemplate</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/DomPropertyBinding.html"><strong>DomPropertyBinding</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/Listener.html"><strong>Listener</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/LoopTemplate.html"><strong>LoopTemplate</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/LoopTemplateInAttribute.html"><strong>LoopTemplateInAttribute</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/StyleAttrBinding.html"><strong>StyleAttrBinding</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/Template.html"><strong>Template</strong></a>
          </h4>
          </div>
          
</div>
<div>
<h3>Typedefs</h3>
          <div class="type">
          <h4>
            <a href="templating/ConditionalBodySetup.html"><strong>ConditionalBodySetup</strong></a>
          </h4>
          </div>
          
          <div class="type">
          <h4>
            <a href="templating/LoopIterationSetup.html"><strong>LoopIterationSetup</strong></a>
          </h4>
          </div>
          
</div>
<div>
<h3>Exceptions</h3>
          <div class="type">
          <h4>
            <a href="templating/DataBindingError.html"><strong>DataBindingError</strong></a>
          </h4>
          </div>
          
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-04-29 09:20:35.915</div>
        </div>
        <script async src="client-live-nav.js"></script>
        </body></html>
        
